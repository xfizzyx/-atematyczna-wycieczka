<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Wycieczka matematyczna</title>
	<title>Wycieczka matematyczna</title>
	<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<style type="text/css">
		@import url('https://fonts.googleapis.com/css2?family=Lato:wght@700&display=swap');
		html, body {margin: 0; height: 100%; overflow: hidden}
		body{
			background: rgb(3,0,14);
			background: linear-gradient(90deg, rgba(3,0,14,1) 0%, rgba(1,0,19,1) 50%, rgba(0,0,13,1) 100%);
			font-family: 'Lato', sans-serif;
			-webkit-user-select: none; /* Safari */
			-ms-user-select: none; /* IE 10 and IE 11 */
			user-select: none;
		}

		a{
			color: #a3a3a3;
			text-decoration: none;
		}

		a:hover{
			color: #a3a3a3;
			text-decoration: none;
		}

		#app-container{
			height: 100%;
			transition: ease 1s all;
		}

		#choose-mode{
			background: rgba(255, 255, 255, 0.3);
			border-radius: 16px;
			box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
			backdrop-filter: blur(5.6px);
			-webkit-backdrop-filter: blur(5.6px);
			border: 1px solid rgba(255, 255, 255, 0.3);
			text-align: center;
			margin: 0;
			position: absolute;
			top: 40%;
			left: 50%;
			-ms-transform: translate(-50%, -40%);
			transform: translate(-50%, -40%);
			padding: 10px;
			transition: ease 1s all;
			opacity: 0;
		}

		.choose-mode-title{
			font-size: 25px;
			color: #c9c9c9;
		}

		.choose-mode-option{
			border: 1px dashed #a3a3a3;
			margin: 5px;
			color: #a3a3a3;
			width: 70%;
			margin-left: auto;
			margin-right: auto;
			border-radius: 5px;
			padding: 5px;
			transition: ease 1s all;
		}

		.choose-mode-option:hover{
			background: white;
			cursor: pointer;
			border: 1px solid white;
			width: 80%;
		}

		#choose-team{
			display: none;
			opacity: 0;
			transition: ease .5s all;
		}

		#choose-options{
			opacity: 1;
			transition: ease .5s all;
		}

		#tasks{
			opacity: 0;
			background: rgba(255, 255, 255, 0.3);
			border-radius: 16px;
			box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
			backdrop-filter: blur(5.6px);
			-webkit-backdrop-filter: blur(5.6px);
			transition: ease 1s all;
			border: 1px solid rgba(255, 255, 255, 0.3);
			margin-left: auto; margin-right: auto;
			height: 90%;
			margin-top: 5%;
		}

		#stop-game{
			color: white;
			font-size: 30px;
			width: 90%;
			text-align: right;
			margin-left: auto;
			margin-right: auto;
			display: block;
			text-align: right;
		}

		#x-icon:after{
		  display: inline-block;
		  content: "\00d7";
		  transform: scale(1.5);
		  text-align: right;
		}

		#title{
			text-align: center;
			color: white;
			font-size: 25px;
		}

		#tasks img{
			margin-left: auto;
			margin-right: auto;
			display: block;
			max-width: 90%;
			margin-top: 20px;
			margin-bottom: 20px;
		}

		#tasks a{
			color: white;
			font-weight: bold;
			text-align: center;
			text-decoration: underline;
		}

		#description{
			width: 80%;
			margin-left: auto;
			margin-right: auto;
			color: white;
		}

	</style>
</head>
<body>

<div id="app-container">
	<div id="choose-mode" class="col-10 col-md-4 col-lg-2">
		<div id="choose-options">
			<div class="choose-mode-title" id="choose-mode-title">Wybierz tryb</div>
			<div class="choose-mode-option" id="option-1">Graj sam</div>
			<a href="#team"><div class="choose-mode-option" id="option-2">Graj w drużynach</div></a>
		</div>
		<div id="choose-team">
			<div class="choose-mode-title">Wybierz drużynę</div>
			<div class="choose-mode-option" id="choose-team-1">Drużyna 1</div>
			<div class="choose-mode-option" id="choose-team-2">Drużyna 2</div>
		</div>
	</div>
	<div id="tasks" class="col-11 col-md-6 col-lg-4">
		<div id="stop-game"><a onclick="deleteAllCookies();"><div id="x-icon" style="text-align: right"></div></a></div>
		<div id="title"></div>
		<img src="1.png" style="max-width: 90%;">
		<div id="description"></div>
	</div>
</div>
<script type="text/javascript">

	window.onhashchange = function(){
		if(location.hash == "#team"){
			nextModal(2);
		}else{
			nextModal(3);
		}
	}

	window.addEventListener("load", (event) => {
		history.pushState("", document.title, window.location.pathname + window.location.search);
		if(getCookie("team") == ""){
			document.getElementById("choose-mode").style.opacity = 1;
			document.getElementById("tasks").style.display = "none";
		}else{
			document.getElementById("title").innerHTML = obj['0'][0]['title'];
			document.getElementById("description").innerHTML = obj['0'][0]['description'];
			document.getElementById("tasks").style.opacity = 1;
		}
	});

	if(document.getElementById("option-1").addEventListener) {
		document.getElementById("option-1").addEventListener("click", function() {
			nextModal(1);
			createCookie("team", "0", 1);
		});
	}

	if(document.getElementById("choose-team-1").addEventListener) {
		document.getElementById("choose-team-1").addEventListener("click", function() {
			nextModal(1);
			createCookie("team", "1", 1);
		});
	}

	if(document.getElementById("choose-team-2").addEventListener) {
		document.getElementById("choose-team-2").addEventListener("click", function() {
			nextModal(1);
			createCookie("team", "2", 1);
		});
	}


	function nextModal(x) {
		if(x == 1){
			document.getElementById("choose-mode").style.opacity = 0;
			document.getElementById("tasks").style.display = "block";
			setTimeout(function(){
				updateApp();
				document.getElementById("choose-mode").style.display = "none";
				document.getElementById("tasks").style.opacity = 1;
			}, 1000);
		}
		else if(x == 2){

			document.getElementById("choose-options").style.opacity = 0;
			setTimeout(function(){
				document.getElementById("choose-options").style.display = "none";
				document.getElementById("choose-team").style.display = "block";
				setTimeout(function(){
					document.getElementById("choose-team").style.opacity = 1;
				}, 100);
				
			}, 500);
		}
		else{
			document.getElementById("choose-team").style.opacity = 0;
			setTimeout(function(){
				document.getElementById("choose-team").style.display = "none";
				document.getElementById("choose-options").style.display = "block";
				setTimeout(function(){
					document.getElementById("choose-options").style.opacity = 1;
				}, 100);
				
			}, 500);
		}
	}

	function createCookie(name,value,days) {
	    if (days) {
	      var date = new Date();
	      date.setTime(date.getTime()+(days*24*60*60*1000));
	      var expires = "; expires="+date.toGMTString();
	    }
	    else var expires = "";
	    document.cookie = name+"="+value+expires+"; path=/";
	  }

	  function getCookie(cname) {
		  let name = cname + "=";
		  let decodedCookie = decodeURIComponent(document.cookie);
		  let ca = decodedCookie.split(';');
		  for(let i = 0; i <ca.length; i++) {
		    let c = ca[i];
		    while (c.charAt(0) == ' ') {
		      c = c.substring(1);
		    }
		    if (c.indexOf(name) == 0) {
		      return c.substring(name.length, c.length);
		    }
		  }
		  return "";
		}


		function deleteAllCookies() {
		    document.cookie.split(";").forEach(function(c) { 
		    	document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
		    });
		    window.location.replace("./");
		}

		var obj;

		fetch('./plan.json')
		  .then(res => res.json())
		  .then(data => {
		    obj = data;
		   });


		  function updateApp(){
		  	document.getElementById("title").innerHTML = obj['0'][0]['title'];
			document.getElementById("description").innerHTML = obj['0'][0]['description'];
		  }

</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script src="jquery.rwdImageMaps.min.js"></script>
</body>
</html>